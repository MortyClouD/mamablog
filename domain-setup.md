# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –¥–ª—è –ú–∞–º–∞–ë–ª–æ–≥

## üåê –û–±–∑–æ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –ú–∞–º–∞–ë–ª–æ–≥. –í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —ç—Ç–∞–ø—ã –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–∞ –¥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

## üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞

### 1. –í—ã–±–æ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–ª—è .ru –¥–æ–º–µ–Ω–æ–≤:
- **REG.RU** - –∫—Ä—É–ø–Ω–µ–π—à–∏–π —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- **R01.RU** - –Ω–∞–¥–µ–∂–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å —Ö–æ—Ä–æ—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **RU-CENTER** - —Å—Ç–∞—Ä–µ–π—à–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤ –†–æ—Å—Å–∏–∏
- **2domains.ru** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ö–æ—Ä–æ—à–∏–µ —Ü–µ–Ω—ã

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤:
- **Namecheap** - –æ—Ç–ª–∏—á–Ω—ã–µ —Ü–µ–Ω—ã, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π WHOIS Guard
- **GoDaddy** - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π, –º–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
- **Google Domains** - –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google
- **Cloudflare Registrar** - –Ω–∏–∑–∫–∏–µ —Ü–µ–Ω—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CDN

### 2. –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ whois
whois mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
# https://www.reg.ru/whois
# https://www.nic.ru/whois
```

#### –®–∞–≥ 2: –í—ã–±–æ—Ä –¥–æ–º–µ–Ω–∞
**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**
- mamablog.ru - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
- mamablog.com - –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è
- mamablog.org - –¥–ª—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- mamablog.net - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è:**
- mamaclub.ru
- mamahub.ru
- mamacommunity.ru
- mamaguide.ru

#### –®–∞–≥ 3: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç —É –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –í–≤–µ–¥–∏—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (1-10 –ª–µ—Ç)
4. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (WHOIS Guard, SSL)
5. –û–ø–ª–∞—Ç–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏

#### WHOIS Guard (–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)
- –°–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ø–∞–º–∞ –∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 100-500 —Ä—É–±/–≥–æ–¥

#### –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –¥–æ–º–µ–Ω–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ DNS –∑–∞–ø–∏—Å–∏

#### A –∑–∞–ø–∏—Å–∏ (IPv4)
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
A     @      185.199.108.153
A     @      185.199.109.153
A     @      185.199.110.153
A     @      185.199.111.153

# –ü–æ–¥–¥–æ–º–µ–Ω www
A     www    185.199.108.153
A     www    185.199.109.153
A     www    185.199.110.153
A     www    185.199.111.153
```

#### AAAA –∑–∞–ø–∏—Å–∏ (IPv6)
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
AAAA  @      2606:50c0:8000::153
AAAA  @      2606:50c0:8001::153

# –ü–æ–¥–¥–æ–º–µ–Ω www
AAAA  www    2606:50c0:8000::153
AAAA  www    2606:50c0:8001::153
```

#### CNAME –∑–∞–ø–∏—Å–∏
```bash
# –ü–æ–¥–¥–æ–º–µ–Ω—ã
CNAME admin  @
CNAME api    @
CNAME blog   @
CNAME mail   @
CNAME cdn    @
```

### 2. MX –∑–∞–ø–∏—Å–∏ (–ø–æ—á—Ç–∞)

#### –û—Å–Ω–æ–≤–Ω—ã–µ MX –∑–∞–ø–∏—Å–∏
```bash
# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 10 - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–æ—á—Ç–∞
MX    10     mail.mamablog.ru

# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20 - —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –ø–æ—á—Ç–∞
MX    20     backup.mail.mamablog.ru

# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 30 - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ—á—Ç–∞
MX    30     mx3.mamablog.ru
```

#### SPF –∑–∞–ø–∏—Å—å
```bash
# –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ email
TXT   @      "v=spf1 include:_spf.google.com include:_spf.yandex.ru ~all"
```

#### DKIM –∑–∞–ø–∏—Å—å
```bash
# –¶–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å email
TXT   mail   "v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC..."
```

### 3. TXT –∑–∞–ø–∏—Å–∏

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Google
```bash
# Google Search Console
TXT   @      "google-site-verification=YOUR_VERIFICATION_CODE"

# Google Analytics
TXT   @      "google-site-verification=YOUR_ANALYTICS_CODE"
```

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Yandex
```bash
# Yandex.Webmaster
TXT   @      "yandex-verification: YOUR_VERIFICATION_CODE"

# Yandex.Metrika
TXT   @      "yandex-verification: YOUR_METRIKA_CODE"
```

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Facebook
```bash
# Facebook Business
TXT   @      "facebook-domain-verification=YOUR_VERIFICATION_CODE"
```

### 4. NS –∑–∞–ø–∏—Å–∏

#### –û—Å–Ω–æ–≤–Ω—ã–µ NS —Å–µ—Ä–≤–µ—Ä—ã
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ NS —Å–µ—Ä–≤–µ—Ä—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
NS    @      ns1.reg.ru
NS    @      ns2.reg.ru

# –ò–ª–∏ –¥–ª—è Cloudflare
NS    @      dana.ns.cloudflare.com
NS    @      ivan.ns.cloudflare.com
```

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã

#### www.mamablog.ru
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç
A     www    185.199.108.153
CNAME www    @
```

#### admin.mamablog.ru
```bash
# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
A     admin  185.199.108.153
CNAME admin  @
```

#### api.mamablog.ru
```bash
# API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
A     api    185.199.108.153
CNAME api    @
```

#### blog.mamablog.ru
```bash
# –ë–ª–æ–≥ (–µ—Å–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)
A     blog   185.199.108.153
CNAME blog   @
```

### 2. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã

#### mail.mamablog.ru
```bash
# –ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
A     mail   185.199.108.153
MX    10     mail.mamablog.ru
```

#### cdn.mamablog.ru
```bash
# CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
A     cdn    185.199.108.153
CNAME cdn    @
```

#### m.mamablog.ru
```bash
# –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
A     m      185.199.108.153
CNAME m      @
```

## üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### 1. Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt update
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
sudo certbot --nginx -d mamablog.ru -d www.mamablog.ru

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
sudo certbot --nginx -d admin.mamablog.ru -d api.mamablog.ru

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 12 * * * /usr/bin/certbot renew --quiet
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
sudo certbot certificates

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL
openssl s_client -connect mamablog.ru:443 -servername mamablog.ru

# –û–Ω–ª–∞–π–Ω –ø—Ä–æ–≤–µ—Ä–∫–∞
# https://www.ssllabs.com/ssltest/
# https://observatory.mozilla.org/
```

### 2. Wildcard SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

#### Comodo SSL
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo cp your_wildcard.crt /etc/ssl/certs/
sudo cp your_wildcard.key /etc/ssl/private/

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
ssl_certificate /etc/ssl/certs/your_wildcard.crt;
ssl_certificate_key /etc/ssl/private/your_wildcard.key;
```

#### DigiCert SSL
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo cp your_digicert.crt /etc/ssl/certs/
sudo cp your_digicert.key /etc/ssl/private/
sudo cp your_digicert_chain.crt /etc/ssl/certs/

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
ssl_certificate /etc/ssl/certs/your_digicert.crt;
ssl_certificate_key /etc/ssl/private/your_digicert.key;
ssl_certificate /etc/ssl/certs/your_digicert_chain.crt;
```

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CDN

### 1. Cloudflare

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [cloudflare.com](https://cloudflare.com)
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω: mamablog.ru
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω: Free (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞)
4. –ò–∑–º–µ–Ω–∏—Ç–µ NS —Å–µ—Ä–≤–µ—Ä—ã –Ω–∞ Cloudflare

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Cloudflare
```bash
# DNS –∑–∞–ø–∏—Å–∏
A     @      185.199.108.153
CNAME www    @
CNAME admin  @
CNAME api    @

# SSL/TLS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SSL/TLS: Full (strict)
Always Use HTTPS: On
HSTS: On
Minimum TLS Version: 1.2

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
Cache Level: Standard
Browser Cache TTL: 4 hours
Always Online: On
```

#### –ü—Ä–∞–≤–∏–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
```bash
# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ www –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
Redirect rule:
Source: www.mamablog.ru/*
Target: mamablog.ru/$1
Status: 301 Permanent Redirect

# –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
Page rule:
URL: admin.mamablog.ru/*
Settings: Security Level: High
```

### 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ CDN

#### Yandex CDN
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Yandex.Cloud
# –°–æ–∑–¥–∞–π—Ç–µ CDN —Ä–µ—Å—É—Ä—Å –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CNAME
CNAME cdn    your-cdn-endpoint.yandexcloud.net
```

#### AWS CloudFront
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ AWS Console
# –°–æ–∑–¥–∞–π—Ç–µ CloudFront Distribution –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CNAME
CNAME cdn    your-cloudfront-domain.cloudfront.net
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ A –∑–∞–ø–∏—Å–µ–π
nslookup mamablog.ru
nslookup www.mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ MX –∑–∞–ø–∏—Å–µ–π
nslookup -type=mx mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ TXT –∑–∞–ø–∏—Å–µ–π
nslookup -type=txt mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ NS –∑–∞–ø–∏—Å–µ–π
nslookup -type=ns mamablog.ru
```

#### –û–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
# https://dnschecker.org/
# https://mxtoolbox.com/
# https://www.whatsmydns.net/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ WHOIS
# https://www.whois.com/
# https://www.nic.ru/whois/
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL

#### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect mamablog.ru:443 -servername mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
openssl s_client -connect mamablog.ru:443 -servername mamablog.ru -showcerts

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
nmap --script ssl-enum-ciphers -p 443 mamablog.ru
```

#### –û–Ω–ª–∞–π–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# SSL Labs
# https://www.ssllabs.com/ssltest/

# Mozilla Observatory
# https://observatory.mozilla.org/

# SSL Checker
# https://www.sslshopper.com/ssl-checker.html
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

#### HTTP —Å—Ç–∞—Ç—É—Å—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∞–π—Ç–∞
curl -I https://mamablog.ru
curl -I https://www.mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
curl -I https://admin.mamablog.ru
curl -I https://api.mamablog.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
curl -I http://mamablog.ru
curl -I http://www.mamablog.ru
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
#!/bin/bash
DOMAINS=("mamablog.ru" "www.mamablog.ru" "admin.mamablog.ru")

for domain in "${DOMAINS[@]}"; do
    if curl -s -o /dev/null -w "%{http_code}" "https://$domain" | grep -q "200"; then
        echo "$domain: UP"
    else
        echo "$domain: DOWN"
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        echo "Domain $domain is down at $(date)" | mail -s "Domain Alert" admin@mamablog.ru
    fi
done
```

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. DNS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### TTL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –ö–æ—Ä–æ—Ç–∫–∏–π TTL –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
A     @      185.199.108.153    TTL: 300

# –î–ª–∏–Ω–Ω—ã–π TTL –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
MX    10     mail.mamablog.ru   TTL: 3600
```

#### DNS prefetch
```html
<!-- –î–æ–±–∞–≤—å—Ç–µ –≤ <head> –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è DNS -->
<link rel="dns-prefetch" href="//www.google-analytics.com">
<link rel="dns-prefetch" href="//mc.yandex.ru">
<link rel="dns-prefetch" href="//connect.facebook.net">
```

### 2. HTTP/2 –∏ HTTP/3

#### Nginx –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```nginx
# –í–∫–ª—é—á–µ–Ω–∏–µ HTTP/2
server {
    listen 443 ssl http2;
    server_name mamablog.ru www.mamablog.ru;
    
    # HTTP/3 (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
    listen 443 quic reuseport;
    
    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è HTTP/3
    ssl_certificate /etc/letsencrypt/live/mamablog.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/mamablog.ru/privkey.pem;
}
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS

#### Cloudflare –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
Under Attack Mode: On
Rate Limiting: Enable
Challenge Passage: 30 minutes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
Security Level: High
Challenge Passage: 30 minutes
Browser Integrity Check: On
```

#### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ fail2ban
sudo apt install fail2ban
sudo systemctl enable fail2ban
sudo systemctl start fail2ban

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw enable
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤

#### Robots.txt
```txt
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª robots.txt –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞
User-agent: *
Allow: /
Disallow: /admin/
Disallow: /includes/
Disallow: /temp/
Disallow: /api/admin/

Sitemap: https://mamablog.ru/sitemap.xml
```

#### .htaccess –∑–∞—â–∏—Ç–∞
```apache
# –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤
RewriteEngine On

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –±–æ—Ç–æ–≤
RewriteCond %{HTTP_USER_AGENT} ^.*(bot|crawler|spider|scraper).*$ [NC]
RewriteRule .* - [F,L]

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
RewriteCond %{QUERY_STRING} (eval|base64|javascript|vbscript|onload|onunload) [NC,OR]
RewriteCond %{QUERY_STRING} (\.\.\/|\.\.\\|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|order|script|set|md5|benchmark|encode) [NC,OR]
RewriteCond %{QUERY_STRING} (<|>|'|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]
RewriteCond %{QUERY_STRING} (;|<|>|'|"|\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|order|script|set|md5|benchmark|encode) [NC]
RewriteRule .* - [F,L]
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ DNS

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ DNS
#!/bin/bash
DOMAIN="mamablog.ru"
NAMESERVERS=("ns1.reg.ru" "ns2.reg.ru")

for ns in "${NAMESERVERS[@]}"; do
    if dig @$ns $DOMAIN +short | grep -q "185.199.108"; then
        echo "DNS $ns: OK"
    else
        echo "DNS $ns: FAILED"
    fi
done
```

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ crontab
*/15 * * * * /usr/local/bin/check-dns.sh >> /var/log/dns-check.log 2>&1
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ SSL
#!/bin/bash
DOMAIN="mamablog.ru"
DAYS=$(echo | openssl s_client -connect $DOMAIN:443 -servername $DOMAIN 2>/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)

if [ ! -z "$DAYS" ]; then
    EXPIRY=$(date -d "$DAYS" +%s)
    NOW=$(date +%s)
    DIFF=$(( ($EXPIRY - $NOW) / 86400 ))
    
    if [ $DIFF -lt 30 ]; then
        echo "SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è $DOMAIN –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ $DIFF –¥–Ω–µ–π" | mail -s "SSL Alert" admin@mamablog.ru
    fi
fi
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

#### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

#### –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### DNS —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
```bash
# –≠–∫—Å–ø–æ—Ä—Ç DNS –∑–∞–ø–∏—Å–µ–π
dig @ns1.reg.ru mamablog.ru AXFR > dns_backup_$(date +%Y%m%d).txt

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
sudo cp /etc/nginx/sites-available/mamablog /backup/nginx_$(date +%Y%m%d).conf
sudo cp /etc/ssl/certs/mamablog.ru.crt /backup/ssl_$(date +%Y%m%d).crt
```

---

**–í–∞–∂–Ω–æ**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞ –∏ —Ö–æ—Ä–æ—à—É—é SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é.
